Git
ローカルリポジトリの作成
前回のレッスンで作成したgit_sampleディレクトリの移動したら、以下のコマンドを入力しましょう。

git init
このコマンドで、ディレクトリ内に中身が空のローカルリポジトリを作成します。

すでにリポジトリが存在している場合には、再度git initを実行する必要はありません。

次に以下のコマンドで.Gitというディレクトリが作成されていることを確認しましょう。

ls -la
ファイルを編集する
それでは、index.htmlの中身を変更しましょう。以下のコードを追加してください。

<h1>Hello World!!</h1>
以上のように変更できたら、次はその変更履歴をGitを使用して保存します。

ファイルをインデックスに登録する
git init実行後、現在作成したファイルの変更履歴を保存するためにgit addを実行します。

このコマンドは、現在開発しているプロジェクトの中で変更があったファイルを見つけてインデックスに上げ、変更履歴を保存するための準備をしてくれます。

つまり、「変更したファイル」を「Gitによってバージョン管理するための対象」に入れるということです。

それでは、以下のコマンドを実行しましょう。

git add .
ちなみに、git add .は変更したファイルをまとめてインデックスにあげるためのコマンドになります。

特定のファイルのみをインデックスに上げる場合は、git add ファイル名と入力します。

例） sample.rbというファイルのみをインデックスに上げる場合のコマンド

git add sample.rb
変更履歴を保存する
変更履歴を保存するには、git commitというコマンドを実行します。

このコマンドを実行すると、ローカルリポジトリの変更内容を保存します。

また、git commitを実行する際にはgit addにおいて変更済みのファイルがインデックスにあることが必須となります。

もし変更済みのファイルがインデックスにない場合は、commitするものが無いというメッセージが表示されます。

nothing to commit, working tree clean
commitを実行する際は、以下のコマンドを入力します。-mや--messageオプションをつけることによって、コミットに対するコメントを残すことができます。

これにより、各コミットにおいてどのような変更が行われたのかを把握しやすくすることができます。

git commit -m "変更内容"
今回は<h1>タグの追加をしたので、以下のコマンドでcommitしましょう。

git commit -m "index.htmlにh1タグ追加"
コミットまでの流れを復習
ファイルを変更してからコミットするまでの流れをもう一度やってみましょう。

index.htmlの内容を変更
index.htmlを以下の内容に変更します。

<h1>Good morning!!</h1>
インデックスに登録
次に変更したファイルをインデックスに登録します。

git add .

または、

git add index.html
コミット
次にインデックスに登録したファイルをコミットします。

git commit -m "index.html変更"
これで、ファイルを変更してからコミットまでの一連の流れが完了です。

git addを実行してからgit commitという流れをなんども繰り返して体に覚えさせるようにしましょう。


変更を元に戻したい場合
ここまで、ファイルを変更、git add、git commitと一連の流れを勉強してきました。

さて、上記のコマンドを間違ってしまった場合はどうすればいいのでしょうか？

僕も現場で未だによく間違えます^^;

ここからは、コマンドを間違ってしまった際の対処法について記述していきます。

間違ったファイルをaddしてしまった場合
addするつもりのなかったファイルを間違ってaddしてしまった場合は、以下のコマンドでadd前に戻すことができます。

git reset
間違ったcommitをしてしまった
こちらもgit resetを使用するのですが、いくつかパターンがあるのでよくあるものをご説明します。

ファイルの変更内容はそのままで、間違ったコミットだけ取り消す
git reset --soft
間違ったコミットを取り消し、ファイルの変更内容も取り消す
git reset --hard
例. １つ前の間違ったコミットだけを取り消す

git reset --soft HEAD^
※HEAD^は直前のコミットという意味になります。

まとめ
ローカルリポジトリの作成

git init
ファイルをインデックスに登録

git add ファイル名
変更内容を保存

git commit -m "変更内容"
まずはこの順番を覚えておきましょう！

今回の学習は以上です。お疲れ様でした( ^ω^ 
